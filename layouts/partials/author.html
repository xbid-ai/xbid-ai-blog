{{/* Prefer .Params.authors taxonomy; fallback to .Params.author. */}}
{{- $links := slice -}}

{{- if .Params.authors -}}
  {{- $displays := .Params.authorDisplay -}}
  {{- range $i, $slug := .Params.authors -}}
    {{- $p := site.GetPage (printf "authors/%s" $slug) -}}

    {{/* pick display: authorDisplay[i] > page.Title > slug */}}
    {{- $name := $slug -}}
    {{- if $p -}}
      {{- if $p.Title -}}
        {{- $name = $p.Title -}}
      {{- end -}}
    {{- end -}}
    {{- if and $displays (lt $i (len $displays)) -}}
      {{- $disp := index $displays $i -}}
      {{- if $disp -}}
        {{- $name = $disp -}}
      {{- end -}}
    {{- end -}}

    {{- if $p -}}
      {{- $links = $links | append (printf `<a href="%s">%s</a>` $p.RelPermalink $name) -}}
    {{- else -}}
      {{- $links = $links | append $name -}}
    {{- end -}}
  {{- end -}}

  {{- delimit $links ", " | safeHTML -}}

{{- else -}}
  {{/* legacy single/multi author support */}}
  {{- $a := .Params.author | default site.Params.author -}}
  {{- $t := printf "%T" $a -}}
  {{- if or (eq $t "[]string") (eq $t "[]interface {}") -}}
    {{- delimit $a ", " -}}
  {{- else -}}
    {{- $link := .Params.authorLink | default site.Params.authorLink -}}
    {{- if $link -}}<a href="{{ $link }}">{{ $a }}</a>{{- else -}}{{ $a }}{{- end -}}
  {{- end -}}
{{- end -}}
